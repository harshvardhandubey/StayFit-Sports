(function(VideoPlayer,$,_){var Player=(function(){var _players={ooyala:{url:"//player.ooyala.com/player.js",embedCode:"",height:"",width:"",playerContainerId:"ooyala-player",autoplay:"0",wmode:"transparent",callback:""},rowdy:{url:"//player.ooyala.com/player.js",embedCode:"",height:"",width:"",playerContainerId:"ooyala-player",autoplay:"0",wmode:"transparent",callback:""},perform:{wmode:"opaque",player:"eplayer24",resizeMode:true},linemakers:{wmode:"opaque",player:"eplayer24",resizeMode:true},eplayer_rightrail:{player:"eplayer2",wmode:"opaque",resizeMode:true}};var _buildUrl=function(obj){if(_.has(obj,"url")===false){return null;}var arr=[];var url;for(var prop in obj){if(prop=="url"){url=location.protocol+obj[prop]+"?";}else{arr.push(prop+"="+obj[prop]);}}return url+arr.join("&");};return{initialize:function(options){for(var prop in options){if(prop=="selector"){this._selector=options[prop];
this._elem=$(this._selector);}}this._player=options["originType"]||options["player"];this._players=_players;this._playerSettings=_.defaults(options,this._players[this._player]);},update:function(options){this[this._player](options);},ooyala:function(options){var self=this,settings={embedCode:"",height:"",width:"",callback:"",playerId:"ooplayer",autoplay:"1"};if(this._selector){this._playerSettings.playerContainerId=this._selector.replace(".","").replace("#","");}for(var prop in settings){if(_.has(options,prop)){settings[prop]=options[prop];}else{if(prop=="embedCode"){if(_.has(options,"origin-guid")){settings[prop]=options["origin-guid"];}else{if(_.has(options,"originGuid")){settings[prop]=options.originGuid;}}}else{if(prop=="playerId"&&_.has(options,"player-id")){settings[prop]=options["player-id"];
}}}}var src=_buildUrl(_.defaults(settings,this._playerSettings)),script=document.createElement("script");script.src=src;this._elem.find('id$="player-box" script').remove();this._elem.append(script);},rowdy:function(options){this.ooyala(options);},linemakers:function(options){this.perform(options);},perform:function(options){var self=this,settings=_.defaults(options,this._playerSettings);this._elem.find("object").remove();this._elem.find("iframe").remove();this._elem.find("video").remove();this._elem.find("script").each(function(i,elem){if(typeof $(elem).attr("src")==="undefined"){$(elem).remove();}});var div=document.createElement("div"),embed=settings.originEmbed||settings.embed,channel=(settings.originChannel||settings.channel)||"",guid=(settings.originGuid||settings.guid)||"",expires=settings.expires||(new Date((new Date).getDate()+1)).getTime(),autoplay=settings.autoplay==1||settings.autoplay===true?"true":"false",mute=(settings.mute==1||settings.mute===true?"true":"false")||null,divId="perf"+embed+(new Date).getTime(),customSettings=settings.settings||{},resize=settings.resizeMode||"";
for(var i in customSettings){settings[i]=customSettings[i];}$(div).attr("id",divId).append('<div style="width:inherit; height:inherit; margin:0 auto;"><i class="fa fa-spinner fa-spin"></i></div>');if($(".video-player-component").length>0){this._elem.find(".video-player-component").prepend(div);}else{this._elem.prepend(div);}window.addPlayer(channel,guid,"",divId,autoplay,mute,embed,settings.player,{wmode:settings.wmode,age:expires,resizeMode:resize});},eplayer_rightrail:function(options){var self=this,settings=_.defaults(options,this._playerSettings);this._elem.find("object").remove();this._elem.find("iframe").remove();this._elem.find("video").remove();this._elem.find("script").each(function(i,elem){if(typeof $(elem).attr("src")==="undefined"){$(elem).remove();}});var div=document.createElement("div"),embed=settings.originEmbed||settings.embed,channel=settings.originChannel||settings.channel,guid=settings.originGuid||settings.guid,expires=settings.expires||(new Date((new Date).getDate()+1)).getTime(),autoplay=settings.autoplay==1||settings.autoplay===true?"true":"false",mute=(settings.mute==1||settings.mute===true?"true":"false")||null,divId="perf-"+embed+"-"+(new Date).getTime();
$(div).attr("id",divId).append('<div style="width:'+settings.width+"px; height:"+settings.height+'px; margin:0 auto;"><i class="fa fa-spinner fa-spin"></i></div>');if($(".video-player-component").length>0){this._elem.find(".video-player-component").prepend(div);}else{this._elem.prepend(div);}window.addPlayer("","","",divId,autoplay,mute,embed,settings.player,{wmode:settings.wmode,age:expires,resizeMode:settings.resizeMode});}};})();VideoPlayer.options={};VideoPlayer.setOptions=function(options){VideoPlayer.options=options;};VideoPlayer.replace=function(elem,options){VideoPlayer.options=options||VideoPlayer.options;VideoPlayer.options["autoplay"]="true";var playerOptions=$(elem).data();Player.initialize(VideoPlayer.options);Player.update(playerOptions);};VideoPlayer.place=function(elem,options){VideoPlayer.options=options||VideoPlayer.options;
var playerOptions=$(elem).data();Player.initialize(VideoPlayer.options);Player.update(playerOptions);};}(window.VideoPlayer=window.VideoPlayer||{},jQuery,_));(function($,_,VideoPlayer){var LOADED_IMAGES=0;var getFeaturedVideoSelector=function(el){var defaultId="featured-video";if($(el).data("video-selector")){return"#"+$(el).data("video-selector");}return"#"+defaultId;};var setImages=function(el){if(LOADED_IMAGES==1){return;}$(el).find("img").each(function(i){if($(this).has("img[data-original]")){var orig=$(this).attr("data-original");$(this).attr("src",orig);}});LOADED_IMAGES=1;};var moveIndicator=function(el,indicator,e){if(typeof indicator==="undefined"){return;}var offset=1;if(e.direction){if(e.direction=="right"){offset=-1;}}var indicatorIndex=indicator.find("a.active").index(),indicatorCount=indicator.find("a").length,inc=indicatorIndex+offset,iIndex=(inc>=indicatorCount||inc<=0)?0:inc;
$(indicator).find("a").removeClass("active");$(indicator).find("a").each(function(i){if(iIndex==i){$(this).addClass("active");}});};var setCarousel=function(el){var featuredModule=$(".featured-video-module"),featuredVideoSelector=getFeaturedVideoSelector(el),featuredVideo=$(featuredVideoSelector),carousel=$(el),indicator=$(".featured-video-module .pane-count-indicator");carousel.on("slide.bs.carousel",function(e){setImages(this);moveIndicator(carousel,indicator,e);});carousel.carousel({interval:false});indicator.find("a").click(function(e){e.preventDefault();var index=$(this).index();carousel.carousel(index);$(indicator).find("a").removeClass("active");$(this).addClass("active");});carousel.find(".thumbnail a").click(function(e){e.preventDefault();VideoPlayer.replace(this,{player:$(this).data("origin-type"),selector:featuredVideoSelector,wmode:"transparent"});
$(".thumbnail").removeClass("thumb-active");$(this).parent().addClass("thumb-active");});};var setVideoPlaylist=function(selector){if($(".video-playlist").length>0){$(".video-playlist").find("a").on("click",function(e){e.preventDefault();var featuredVideoSelector=selector;VideoPlayer.replace(this,{player:$(this).data("origin-type")||$(this).data("origintype"),selector:featuredVideoSelector,wmode:"transparent"});$(".video-playlist .video-meta").removeClass("active");$(this).parent().addClass("active");$("html, body").animate({scrollTop:$(featuredVideoSelector).offset().top-100},1000);});}};var playDynamicLeadVideo=function(){$(this).parent().addClass("video-playing");$(".alt-features").addClass("video-playing");$(this).parent().find("img").remove("img");$(this).parent().remove(".meta");VideoPlayer.place($(this).parent(),$(this).data());
};$(document).ready(function(){if($('div[id^="featured-video-carousel"]').length>0){$('div[id^="featured-video-carousel"]').each(function(i){setCarousel(this);setVideoPlaylist(getFeaturedVideoSelector(this));});}else{if($(".video-playlist").length>0){$('div[id^="featured-video"]').each(function(i){setVideoPlaylist("#"+$(this).prop("id"));});}}if($(".featured-video-container").length>0){$(".featured-video-container").each(function(i){VideoPlayer.place(this,{player:$(this).data("origin-type")||$(this).data("origintype"),selector:"#"+$(this).prop("id"),autoplay:"false",wmode:"transparent"});});}$("#dynamic-lead-video a").bind("click",playDynamicLeadVideo);});})(jQuery,_,VideoPlayer);