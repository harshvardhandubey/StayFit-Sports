var CBMatches=angular.module("CBMatches",[]);
var default_tracker =  "?utm_source=toi&utm_medium=widget&utm_campaign=timesinternet";
if(typeof(tracker) == "undefined" || tracker == "") tracker = default_tracker;
CBMatches.controller("MatchScag",["$scope","$http","$timeout",function(b,e,d){b.api_url="/livematches.json";b.matches=[];b.current_slide=0;b.refresh_time=500;b.fetch_data=function(){d.cancel(0);""!=b.api_url&&e.get(b.api_url).success(function(c){c=c.matches;b.matches=[];for(matchId in c){var a=c[matchId];a.commentary_url="http://www.cricbuzz.com/live-cricket-scores/"+a.id+"/"+cb_sanitize(a.team1.name+" vs "+a.team2.name+"-"+a.series.name)+tracker;a.scorecard_url=
"http://www.cricbuzz.com/live-cricket-scorecard/"+a.id+"/"+cb_sanitize(a.team1.name+" vs "+a.team2.name+"-"+a.series.name)+tracker;if("preview"==a.state||"upcoming"==a.state)a.link_string="PREVIEW",a.state_color="#F6A823",a.bat_team="",a.team1.score="",a.team2.score="",a.state_title="Upcoming";else{a.state_color="#4990E2";if("complete"==a.state||"mom"==a.state||"recent"==a.state)a.state_color="#4990E2";angular.isUndefined(a.score)?(a.bat_team=
"",a.team1.score="",a.team2.score=""):a.score.batting.id==a.team1.id?(a.bat_team="team1",a.team1.score=a.score.batting.score,a.team2.score=a.score.bowling.score):a.score.batting.id==a.team2.id&&(a.bat_team="team2",a.team1.score=a.score.bowling.score,a.team2.score=a.score.batting.score);a.link_string="FULL SCORECARD | COMMENTARY"}"In Progress"==a.state_title&&(a.state_title="Live",a.state_color="#D0021B");null!=a.match_index?b.matches[a.match_index]=a:b.matches.push(a)}});$time_out_id=d(function(){b.fetch_data()},
1E3*b.refresh_time)};b.previous_slide=function(){b.current_slide--;0>b.current_slide&&(b.current_slide=0)};b.next_slide=function(){b.current_slide++;b.current_slide>b.matches.length-1&&(b.current_slide=b.matches.length-1)};b.fetch_data()}]);function cb_sanitize(b){returnValue=b;null!=b&&(returnValue=b.toLowerCase().replace(/[^A-Za-z0-9 ]/g,"").replace(/[\s]/g,"-"));return returnValue};
